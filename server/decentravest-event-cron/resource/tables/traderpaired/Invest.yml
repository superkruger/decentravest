DependsOn: AthenaDB
Type: AWS::Glue::Table
Properties:
  CatalogId: !Ref AWS::AccountId
  DatabaseName: "blockchain-events-${opt:stage, 'dev'}"
  TableInput:
    Name: traderpaired_invest
    Description: Invest events
    TableType: EXTERNAL_TABLE
    Parameters: {
      "classification": "json"
    }
    StorageDescriptor:
      OutputFormat: org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat
      Columns:
      - Name: address
        Type: string
      - Name: blockhash
        Type: string
      - Name: blocknumber
        Type: bigint
      - Name: logindex
        Type: bigint
      - Name: removed
        Type: boolean
      - Name: transactionhash
        Type: string
      - Name: transactionindex
        Type: bigint
      - Name: id
        Type: string
      - Name: returnvalues
        Type: struct<0:bigint,1:string,2:string,3:string,4:string,5:bigint,6:int,7:int,8:bigint,9:bigint,10:int,id:bigint,wallet:string,trader:string,investor:string,token:string,amount:bigint,investorProfitPercent:int,investmentType:int,allocationInvested:bigint,allocationTotal:bigint,date:int>
      - Name: event
        Type: string
      InputFormat: org.apache.hadoop.mapred.TextInputFormat
      Location: "s3://${self:custom.eventbucket}/traderpaired-invest"
      SerdeInfo:
        SerializationLibrary: org.openx.data.jsonserde.JsonSerDe
